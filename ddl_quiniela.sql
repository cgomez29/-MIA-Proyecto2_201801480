CREATE TABLE FASE(
    idFase NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    nombre VARCHAR2(100) NOT NULL,
    PRIMARY KEY(idFase)
);

CREATE TABLE DEPORTE (
    idDeporte NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    nombre VARCHAR2(100) NOT NULL,
    PRIMARY KEY(idDeporte)
);

CREATE TABLE MEMBRESIA (
    idMembresia NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    nombre VARCHAR2(100) NOT NULL,
    precio FLOAT NOT NULL,  
    PRIMARY KEY(idMembresia)
);

CREATE TABLE TEMPORADA (
    idTemporada NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    nombre VARCHAR2(100) NOT NULL,
    mes DATE NULL,
    estado INT NOT NULL,
    PRIMARY KEY(idTemporada)
);

CREATE TABLE CLIENTE (
    idCliente NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    username VARCHAR2(200) NOT NULL,
    password VARCHAR2(255) NOT NULL,
    name VARCHAR(150) NOT NULL,
    surname VARCHAR(150) NOT NULL,
    tier VARCHAR(100) NOT NULL,
    fecha_nacimiento VARCHAR2(255) NULL,
    fecha_registro VARCHAR2(255) NOT NULL,
    email VARCHAR2(255) NULL,
    photo VARCHAR2(255) NULL,
    PRIMARY KEY (idCliente)
);


CREATE TABLE CHAT (
    idChat NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    mensaje VARCHAR2(255) NOT NULL,
    fechar_hora TIMESTAMP NOT NULL,
    idCliente NUMBER NOT NULL,
    PRIMARY KEY(idChat),
    FOREIGN KEY(idCliente) REFERENCES CLIENTE(idCliente)
);

CREATE TABLE RECOMPENSA (
    idRecompensa NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    score NUMBER NOT NULL,
    premio FLOAT NOT NULL,
    tier VARCHAR2(200) NOT NULL,
    fecha DATE NOT NULL,
    idCliente NUMBER NOT NULL,
    PRIMARY KEY(idRecompensa),
    FOREIGN KEY(idCliente) REFERENCES CLIENTE(idCliente)
);

CREATE TABLE JORNADA (
    idJornada NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    fecha_hora TIMESTAMP NOT NULL,
    idFase NUMBER NOT NULL,
    idTemporada NUMBER NOT NULL,
    PRIMARY KEY(idJornada),
    FOREIGN KEY(idFase) REFERENCES FASE(idFase),
    FOREIGN KEY(idTemporada) REFERENCES TEMPORADA(idTemporada)
);

CREATE TABLE DETALLE_CLIENTE (
    id_detalle_cliente NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    score NUMBER NOT NULL,
    idTemporada NUMBER NOT NULL,
    idMembresia NUMBER NOT NULL,
    idCliente NUMBER NOT NULL,
    PRIMARY KEY(id_detalle_cliente),
    FOREIGN KEY(idTemporada) REFERENCES TEMPORADA(idTemporada),
    FOREIGN KEY(idMembresia) REFERENCES MEMBRESIA(idMembresia),
    FOREIGN KEY(idCliente) REFERENCES CLIENTE(idCliente)    
);

CREATE TABLE EVENTO (
    idEvento NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    fecha_hora TIMESTAMP NOT NULL,
    estado VARCHAR2(35) NOT NULL,
    idJornada NUMBER NOT NULL,
    idDeporte NUMBER NOT NULL,
    PRIMARY KEY(idEvento),
    FOREIGN KEY(idJornada) REFERENCES JORNADA(idJornada),
    FOREIGN KEY(idDeporte) REFERENCES DEPORTE(idDeporte)    
);

CREATE TABLE RESULTADO (
    idResultado NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    visitante NUMBER NOT NULL,
    local NUMBER NOT NULL,
    idEvento NUMBER NOT NULL,
    PRIMARY KEY(idResultado),
    FOREIGN KEY(idEvento) REFERENCES EVENTO(idEvento)
);

CREATE TABLE EQUIPO (
    idEquipo NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    nombre VARCHAR2(200) NOT NULL,
    tipo VARCHAR2(100) NOT NULL,
    idEvento NUMBER NOT NULL,
    PRIMARY KEY(idEquipo),
    FOREIGN KEY(idEvento) REFERENCES EVENTO(idEvento)
);

CREATE TABLE PREDICCION (
    idPrediccion NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    local NUMBER NOT NULL,
    visitante NUMBER NOT NULL,
    id_detalle_cliente NUMBER NOT NULL,
    idEvento NUMBER NOT NULL,
    PRIMARY KEY(idPrediccion),
    FOREIGN KEY(id_detalle_cliente) REFERENCES DETALLE_CLIENTE(id_detalle_cliente),
    FOREIGN KEY(idEvento) REFERENCES EVENTO(idEvento)
);


